(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-56895b1a"],{"5b50":function(t,e,a){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function n(t){if(Array.isArray(t))return r(t)}function s(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function o(t,e){if(t){if("string"===typeof t)return r(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?r(t,e):void 0}}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return n(t)||s(t)||o(t)||i()}a.d(e,"a",(function(){return c}))},"99b4":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page-view",[a("a-card",{attrs:{bordered:!1,bodyStyle:{padding:"16px"}}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"姓名："}},[a("a-input",{model:{value:t.queryParam.username,callback:function(e){t.$set(t.queryParam,"username",e)},expression:"queryParam.username"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"订单状态："}},[a("a-select",{attrs:{placeholder:"请选择订单状态",allowClear:""},model:{value:t.queryParam.state,callback:function(e){t.$set(t.queryParam,"state",e)},expression:"queryParam.state"}},[a("a-select-option",{attrs:{value:-1}},[t._v("请选择")]),a("a-select-option",{attrs:{value:0}},[t._v("未审核")]),a("a-select-option",{attrs:{value:1}},[t._v("已通过")]),a("a-select-option",{attrs:{value:2}},[t._v("未通过")])],1)],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"申请日期："}},[a("div",[a("a-date-picker",{on:{change:t.onChange},model:{value:t.queryParam.datetime,callback:function(e){t.$set(t.queryParam,"datetime",e)},expression:"queryParam.datetime"}}),a("br")],1)])],1),a("a-col",{attrs:{md:6,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons"},[a("a-space",[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleQuery()}}},[t._v("查询")]),a("a-button",{on:{click:function(e){return t.handleResetParam()}}},[t._v("重置")]),a("a-button",{on:{click:function(e){return t.printOrder()}}},[t._v("打印")])],1)],1)])],1)],1)],1),a("a-table",{ref:"print",attrs:{bordered:"",columns:t.columns,"data-source":t.ordersList,pagination:!1,loading:t.postsLoading},scopedSlots:t._u([{key:"username",fn:function(e){return a("a",{},[t._v(t._s(e))])}},{key:"states",fn:function(e){return a("span",{},[a("a-tag",{attrs:{color:0==e?"volcano":1==e?"green":"geekblue"}},[t._v(" "+t._s(0==e?"待审核":1==e?"已通过":"未通过")+" ")])],1)}},{key:"action",fn:function(e,r){return a("span",{staticClass:"no-print"},[0==r.state?a("a",{on:{click:function(e){return t.passOrder(r,1)}}},[t._v("通过")]):t._e(),0==r.state?a("a-divider",{attrs:{type:"vertical"}}):t._e(),0==r.state?a("a",{on:{click:function(e){return t.passOrder(r,2)}}},[t._v("拒绝")]):t._e(),0==r.state?a("a-divider",{attrs:{type:"vertical"}}):t._e(),a("a",{on:{click:function(e){return t.deleteOrder(r)}}},[t._v("删除")])],1)}}])},[a("span",{attrs:{slot:"username"},slot:"username"},[a("a-icon",{attrs:{type:"smile-o"}}),t._v(" 姓名")],1)]),a("div",{staticClass:"page-wrapper"},[t.pagination.open?a("a-pagination",{staticClass:"pagination",attrs:{"page-size-options":t.pageSizeOptions,total:t.total,"show-size-changer":"","page-size":t.pageSize,current:t.current,defaultPageSize:20,showSizeChanger:"",showLessItems:""},on:{showSizeChange:t.onShowSizeChange,change:t.handlePaginationChange},scopedSlots:t._u([{key:"buildOptionText",fn:function(e){return[e.value!==t.total?a("span",[t._v(t._s(e.value)+"条/页")]):t._e(),e.value===t.total?a("span",[t._v("全部")]):t._e()]}}],null,!1,3668733497),model:{value:t.current,callback:function(e){t.current=e},expression:"current"}}):t._e()],1)],1)],1)},n=[],s=a("5b50"),o=a("c8c3"),i=a("b30f"),c=a("9158"),u=[{dataIndex:"username",key:"username",title:"姓名",slots:{title:"username"},scopedSlots:{customRender:"username"}},{title:"学号",dataIndex:"student_num",key:"student_num"},{title:"系部",dataIndex:"department",key:"department"},{title:"班级",dataIndex:"class_name",key:"class"},{title:"价格",dataIndex:"money",key:"money"},{title:"数量",dataIndex:"amount",key:"amount"},{title:"设备",key:"device",dataIndex:"device"},{title:"状态",key:"state",dataIndex:"state",scopedSlots:{customRender:"states"}},{title:"申请时间",key:"createTime",dataIndex:"createTime"},{title:"操作",key:"action",scopedSlots:{customRender:"action"},class:"no-print"}],l={components:{PageView:o["a"]},data:function(){return{columns:u,ordersList:[],queryParam:{username:null,state:null,datetime:null},pageSizeOptions:["10","20","30","40","50"],current:1,pageSize:10,total:null,props:{value:10},pagination:{page:null,size:null,open:!0},postsLoading:!1}},mounted:function(){var t=this;this.getLatestOrder(),i["a"].countOrder().then((function(e){t.total=e.data.data,console.log(e.data),t.pageSizeOptions.push(e.data.data)}))},methods:{printOrder:function(){this.$print(this.$refs.print)},getLatestOrder:function(){var t=this;i["a"].getLatest().then((function(e){t.ordersList=e.data.data;var a=0;for(a;a<t.ordersList.length;a++)t.ordersList[a].createTime=Object(c["a"])(t.ordersList[a].createTime)}))},handlePaginationChange:function(t,e){var a=this;this.$log.debug("Current: ".concat(t,", PageSize: ").concat(e)),this.pagination.page=t,this.pagination.size=e,this.postsLoading=!0,i["a"].getLatest((t-1)*e,e).then((function(t){a.ordersList=t.data.data;var e=0;for(e;e<a.ordersList.length;e++)a.ordersList[e].createTime=Object(c["a"])(a.ordersList[e].createTime);a.postsLoading=!1}))},handleQuery:function(){var t=this;console.log(this.queryParam),this.postsLoading=!1,console.log(this.queryParam.username,this.queryParam.state,this.queryParam.datetime),null==this.queryParam.username&&-1==this.queryParam.state&&null==this.queryParam.datetime?this.getLatestOrder():i["a"].queryOrder(this.queryParam.username,this.queryParam.state,this.queryParam.datetime).then((function(e){t.ordersList=e.data.data;var a=0;for(a;a<t.ordersList.length;a++)t.ordersList[a].createTime=Object(c["a"])(t.ordersList[a].createTime);t.postsLoading=!1}))},onShowSizeChange:function(t,e){this.pageSize=e,this.handlePaginationChange(this.current,this.pageSize)},onChange:function(t,e){this.queryParam.datetime=e,console.log(this.queryParam.datetime,e)},handleResetParam:function(){this.queryParam.datetime=null,this.queryParam.username=null,this.queryParam.state=-1},passOrder:function(t,e){var a=this,r=1==e?"订单审核通过":"订单审核不通过";this.$message.loading({content:"Loading..."}),console.log(t),i["a"].passOrder(t.id,e).then((function(n){n.data>0?(a.$message.success(r,5),t.state=e):a.$message.error("操作失败")}))},deleteOrder:function(t){var e=this;this.$message.loading({content:"Loading..."}),i["a"].deleteOrder(t.id).then((function(a){if(console.log(a),a.data>0){e.$message.success("删除成功",5);var r=Object(s["a"])(e.ordersList);e.ordersList=r.filter((function(e){return e.id!=t.id}))}else e.$message.error("删除失败")}))}}},d=l,m=a("bdd7"),p=Object(m["a"])(d,r,n,!1,null,null,null);e["default"]=p.exports},b30f:function(t,e,a){"use strict";var r=a("9efd"),n=a("caf6"),s="/api/admin/orders",o={getLatest:function(t,e){return Object(r["a"])({url:"".concat(s,"/latest"),params:{top:e,start:t},method:"get"})},passOrder:function(t,e){return Object(r["a"])({url:"".concat(s,"/passOrder"),method:"post",data:{id:t},params:{id:t,state:e}})},deleteOrder:function(t){return Object(r["a"])({url:"".concat(s,"/deleteOrder"),method:"post",data:{id:t},params:{id:t}})},countOrder:function(){return Object(r["a"])({url:"".concat(s,"/countOrder"),method:"post"})},queryOrder:function(t,e,a){return Object(r["a"])({url:"".concat(s,"/queryOrder"),method:"post",data:{username:t,state:e,createTime:a},params:{username:t,state:e,createTime:a}})}};n["a"].update=function(t,e,a){return Object(r["a"])({url:"".concat(s,"/").concat(t),method:"post",data:e,params:{autoSave:a}})},e["a"]=o},caf6:function(t,e,a){"use strict";var r=a("9efd"),n="/api/admin/posts",s={listLatest:function(t){return Object(r["a"])({url:"".concat(n,"/latest"),params:{top:t},method:"get"})},query:function(t){return Object(r["a"])({url:n,params:t,method:"get"})},get:function(t){return Object(r["a"])({url:"".concat(n,"/").concat(t),method:"get"})},inStock:function(t,e){return Object(r["a"])({url:n+"/inStock",method:"post",data:e,params:{categories:t}})},inStockAll:function(t){return Object(r["a"])({url:n+"/inStockAll",method:"post",data:t})},create:function(t,e){return Object(r["a"])({url:n,method:"post",data:t,params:{autoSave:e}})},update:function(t,e,a){return Object(r["a"])({url:"".concat(n,"/").concat(t),method:"put",data:e,params:{autoSave:a}})},updateDraft:function(t,e){return Object(r["a"])({url:"".concat(n,"/").concat(t,"/status/draft/content"),method:"put",data:{content:e}})},updateStatus:function(t,e){return Object(r["a"])({url:"".concat(n,"/").concat(t,"/status/").concat(e),method:"put"})},updateStatusInBatch:function(t,e){return Object(r["a"])({url:"".concat(n,"/status/").concat(e),data:t,method:"put"})},delete:function(t){return Object(r["a"])({url:"".concat(n,"/").concat(t),method:"delete"})},deleteInBatch:function(t){return Object(r["a"])({url:"".concat(n),data:t,method:"delete"})},preview:function(t){return Object(r["a"])({url:"".concat(n,"/preview/").concat(t),method:"get"})},postStatus:{PUBLISHED:{value:"PUBLISHED",color:"green",status:"success",text:"已发布"},DRAFT:{value:"DRAFT",color:"yellow",status:"warning",text:"草稿"},RECYCLE:{value:"RECYCLE",color:"red",status:"error",text:"回收站"},INTIMATE:{value:"INTIMATE",color:"blue",status:"success",text:"私密"}},permalinkType:{DEFAULT:{type:"DEFAULT",text:"默认"},YEAR:{type:"YEAR",text:"年份型"},DATE:{type:"DATE",text:"年月型"},DAY:{type:"DAY",text:"年月日型"},ID:{type:"ID",text:"ID 型"},ID_SLUG:{type:"ID_SLUG",text:"ID 别名型"}}};e["a"]=s}}]);